import org.openhab.core.library.types.*
import org.openhab.core.persistence.*
import org.openhab.model.script.actions.*
import java.lang.math

var Number counter = 1
var Timer timer = null
var String saytemp =  ""

var String lowtonight
rule "Speak temperature"
	when 
		Time cron "0 58 * * * ?"
	then
   		if ( Temperature_HC_Outside.state instanceof DecimalType ){
		var hour = now.getHourOfDay
		var Number tempoutside = Temperature_HC_Outside.state
		if (wxTodayTempMin.state.toString().contains("°C")) {
			lowtonight = wxTodayTempMin.state.toString().split("°C").get(0)
		} else {
			lowtonight = wxTodayTempMin.state.toString().split("\\?\\?C").get(0)
		}
			logInfo("SpeakTemp", tempoutside.toString() +" " + lowtonight)
		saytemp = "Outside is " + (Math::round(tempoutside.floatValue*10)/10).toString() + " Celsius  " + "  low tonight of " + lowtonight + " Celsius"
   		if (hour >6 && hour < 22){
				squeezeboxSpeak("kitchen", saytemp)
				squeezeboxSpeak("Bedroom", saytemp)
				squeezeboxSpeak("Gym", saytemp)
				}

end



